<html>
<body>
<style>
canvas {
	transform: scale(-1, 1);
}
</style>

<script src="common.js"></script>
<script src="artk_demos/js/third_party/three.js/three.min.js"></script>
<script src="artk_demos/js/artoolkit.three.js"></script>

<script>

artoolkit.getUserMediaThreeScene(720, 480, function(arScene) {

	var renderer = new THREE.WebGLRenderer({antialias: true});
	renderer.setSize(arScene.video.videoWidth, arScene.video.videoHeight);

	document.body.appendChild(renderer.domElement);

	// Create a couple of lights for our AR scene.
	var light = new THREE.PointLight(0xffffff);
	light.position.set(40, 40, 40);
	arScene.scene.add(light);

	var light = new THREE.PointLight(0xff8800);
	light.position.set(-40, -20, -30);
	arScene.scene.add(light);

	// Load the marker to use.
	artoolkit.loadMultiMarker('/bin/Data/multi-barcode-4x3.dat', function(marker) {

		console.log('multi is', marker);

		var greenCube = new THREE.Mesh( new THREE.BoxGeometry(1,1,1), new THREE.MeshLambertMaterial({ color: 0x33ff33 }) );
		greenCube.position.z = 0.5;

		// Create an object that tracks the marker transform.
		var markerRoot = artoolkit.createThreeMultiMarker(marker);
		arScene.scene.add(markerRoot);
		markerRoot.add(greenCube);

		var tick = function() {
			requestAnimationFrame(tick);
			arScene.process();
			arScene.renderOn(renderer);
		};
		tick();

	});

});

</script>

</body>
</html>